<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>畫畫測試與圖像拼貼生成器</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; display: flex; justify-content: center; align-items: flex-start; flex-wrap: wrap; }
        .container { display: flex; justify-content: space-between; width: 100%; max-width: 1200px; }
        .drawing-container, .collage-container { flex: 1; padding: 20px; box-sizing: border-box; }

        canvas { border: 2px solid #000; cursor: crosshair; }
        #preview { display: flex; flex-wrap: wrap; justify-content: center; }
        .preview-img { width: 100px; height: 100px; object-fit: cover; margin: 5px; }

        /* 加一些間距設置 */
        h1, h2, h3 { margin-bottom: 20px; }
        button { margin-top: 10px; }
    </style>
</head>
<body>
    <h1>畫畫測試與圖像拼貼生成器</h1>

    <div class="container">
        <!-- 畫畫區域 -->
        <div class="drawing-container">
            <h2>來畫畫吧！</h2>
            <canvas id="drawingCanvas" width="600" height="600"></canvas><br>
            <button onclick="uploadDrawing()">上傳畫布</button>
            <button id="clearBtn">清除畫布</button>
            <label for="brushSize">筆刷粗細：</label>
            <input type="range" id="brushSize" min="1" max="50" value="5">
            <span id="brushValue">5</span><br><br>
        </div>

        <!-- 圖像拼貼區域 -->
        <div class="collage-container">
            <h2>生成圖像拼貼</h2>
            <form id="uploadForm">
                <label>選擇圖片：</label>
                <input type="file" name="images" id="images" multiple accept="image/*"><br><br>

                <label>選擇形狀：</label>
                <select name="shape" id="shape">
                    <option value="rectangle">矩形</option>
                    <option value="circle">圓形</option>
                    <option value="custom">自訂形狀</option>
                </select><br><br>

                <button type="submit">生成拼貼</button>
            </form>

            <h3>預覽：</h3>
            <div id="preview"></div>

            <h3>拼貼結果：</h3>
            <img id="collageResult" style="max-width: 100%; display: none;">
        </div>
    </div>

    <script>
        // 畫畫功能
        const canvas = document.getElementById("drawingCanvas");
        const ctx = canvas.getContext("2d");
        ctx.fillStyle = "white";
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        const clearBtn = document.getElementById("clearBtn");
        clearBtn.addEventListener("click", () => {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = "white";
            ctx.fillRect(0, 0, canvas.width, canvas.height);
        });

        const brushSizeInput = document.getElementById("brushSize");
        const brushValueLabel = document.getElementById("brushValue");

        let brushSize = parseInt(brushSizeInput.value);
        ctx.lineWidth = brushSize;

        brushSizeInput.addEventListener("input", () => {
            brushSize = parseInt(brushSizeInput.value);
            ctx.lineWidth = brushSize;
            brushValueLabel.textContent = brushSize;
        });

        let drawing = false;
        let lastX = 0;
        let lastY = 0;

        canvas.addEventListener("mousedown", (e) => {
            drawing = true;
            lastX = e.offsetX;
            lastY = e.offsetY;
        });
        canvas.addEventListener("mouseup", () => drawing = false);
        canvas.addEventListener("mousemove", draw);

        function draw(e) {
            if (!drawing) return;

            ctx.strokeStyle = "black";
            ctx.lineWidth = brushSize;
            ctx.lineCap = "round";

            ctx.beginPath();
            ctx.moveTo(lastX, lastY);
            ctx.lineTo(e.offsetX, e.offsetY);
            ctx.stroke();

            lastX = e.offsetX;
            lastY = e.offsetY;
        }

        function uploadDrawing() {
            const dataUrl = canvas.toDataURL("image/png");
            localStorage.setItem("drawingImage", dataUrl);  // 保存畫布圖像
            alert("畫布已上傳成功！");
        }

        // 圖像拼貼功能
        document.get
